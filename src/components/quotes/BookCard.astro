---
/**
 * BookCard: Book recommendation / review card.
 *
 * Usage:
 *   <BookCard
 *     title="Mero Cristianismo"
 *     author="C.S. Lewis"
 *     year="1952"
 *     cover="/images/books/mere-christianity.jpg"
 *     rating={5}
 *     tags={["apologética", "clásico"]}>
 *     Una defensa racional de la fe cristiana accesible para cualquier lector...
 *   </BookCard>
 */
interface Props {
  title: string;
  author: string;
  year?: string;
  cover?: string;
  rating?: 1 | 2 | 3 | 4 | 5;
  tags?: string[];
}
const { title, author, year, cover, rating, tags } = Astro.props;
const stars = rating ? "★".repeat(rating) + "☆".repeat(5 - rating) : null;
---

<div class="my-10">
  <div
    class="flex flex-col sm:flex-row gap-6 bg-surface border-[length:var(--border-width)] border-border-subtle rounded-[var(--radius-lg)] p-6 hover:border-secondary/30 transition-colors"
  >
    {/* Cover */}
    {
      cover ? (
        <div class="shrink-0 w-28 sm:w-32">
          <img
            src={cover}
            alt={title}
            class="w-full rounded-[var(--radius-md)] shadow-[var(--shadow-md)] aspect-[2/3] object-cover"
          />
        </div>
      ) : (
        <div class="shrink-0 w-28 sm:w-32 aspect-[2/3] bg-bg-offset rounded-[var(--radius-md)] flex items-center justify-center">
          <div class="i-ph-book text-3xl text-border" />
        </div>
      )
    }

    {/* Info */}
    <div class="flex-1 min-w-0">
      <h4 class="text-lg font-display font-bold text-primary mb-1">{title}</h4>
      <div class="flex flex-wrap items-center gap-x-3 gap-y-1 mb-3">
        <span class="text-sm text-text-muted font-serif">{author}</span>
        {
          year && (
            <span class="text-[10px] font-mono text-text-muted opacity-60">
              ({year})
            </span>
          )
        }
      </div>

      {
        stars && (
          <div class="text-sm text-accent mb-3 tracking-wider">{stars}</div>
        )
      }

      <div
        class="text-sm text-text-muted font-serif leading-relaxed [&>p]:mb-2"
      >
        <slot />
      </div>

      {
        tags && tags.length > 0 && (
          <div class="flex flex-wrap gap-1.5 mt-3">
            {tags.map((tag) => (
              <span class="text-[10px] px-2 py-0.5 bg-bg-offset rounded-[var(--radius-pill)] text-text-muted font-mono">
                {tag}
              </span>
            ))}
          </div>
        )
      }
    </div>
  </div>
</div>
