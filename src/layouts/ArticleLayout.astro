---
import Layout from "./Layout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";

interface Props {
  title: string;
  category: string;
  date: string;
  description: string;
  heroImage?: string;
  headings?: { depth: number; slug: string; text: string }[];
}

const {
  title,
  category,
  date,
  description,
  heroImage,
  headings = [],
} = Astro.props;
---

<Layout title={title}>
  <Header />

  <main class="pt-8 pb-24 min-h-screen">
    <article class="max-w-3xl mx-auto px-6">
      <header class="mb-16 text-center">
        <div class="flex items-center justify-center gap-4 mb-8">
          <span
            class="text-secondary text-xs font-bold uppercase tracking-widest"
          >
            {category}
          </span>
          <span class="w-1 h-1 bg-border rounded-full"></span>
          <span class="text-xs text-text opacity-60 font-mono">
            {date}
          </span>
        </div>

        <h1
          class="text-5xl md:text-6xl font-serif font-black text-primary mb-8 leading-[1.1] tracking-tight"
        >
          {title}
        </h1>

        <p
          class="text-xl text-text opacity-80 font-sans font-light leading-relaxed max-w-2xl mx-auto"
        >
          {description}
        </p>
        <div class="w-24 h-1 bg-secondary mx-auto mt-12 opacity-50"></div>
      </header>

      {
        heroImage && (
          <div class="relative w-full aspect-[21/9] mb-16 overflow-hidden rounded-[var(--radius-lg)] shadow-sm">
            <img
              src={heroImage}
              alt={title}
              class="absolute inset-0 w-full h-full object-cover"
            />
          </div>
        )
      }

      <div
        class="prose prose-lg mx-auto prose-slate dark:prose-invert font-serif leading-loose
                prose-headings:font-serif prose-headings:font-bold prose-headings:text-primary
                prose-p:text-text prose-p:opacity-90
                prose-a:text-primary prose-a:font-bold prose-a:no-underline hover:prose-a:text-secondary prose-a:border-b prose-a:border-secondary/30 hover:prose-a:border-secondary prose-a:transition-all
                prose-strong:text-primary prose-strong:font-bold
                prose-blockquote:border-l-2 prose-blockquote:border-secondary prose-blockquote:pl-6 prose-blockquote:italic prose-blockquote:font-serif prose-blockquote:text-xl prose-blockquote:text-primary
                prose-img:rounded-[var(--radius-md)] prose-img:shadow-sm"
      >
        <slot />
      </div>

      <div
        class="mt-24 pt-12 border-t border-border flex justify-between items-center"
      >
        <a
          href="/blog"
          class="inline-flex items-center gap-2 text-sm font-bold uppercase tracking-widest text-text hover:text-secondary transition-colors opacity-60 hover:opacity-100"
        >
          <div class="i-ph-arrow-left"></div> Volver al archivo
        </a>
      </div>
    </article>
  </main>

  <Footer />
</Layout>
