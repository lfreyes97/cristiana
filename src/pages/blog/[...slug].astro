---
import { type CollectionEntry, getCollection, render } from "astro:content";
import ArticleLayout from "../../layouts/ArticleLayout.astro";

export async function getStaticPaths() {
  const posts = await getCollection("blog");
  return posts.map((post) => ({
    params: { slug: post.id },
    props: post,
  }));
}
type Props = CollectionEntry<"blog">;

const post = Astro.props;
const { Content, headings } = await render(post);

const date = post.data.pubDate.toLocaleDateString("es-ES", {
  year: "numeric",
  month: "long",
  day: "numeric",
});
---

<ArticleLayout
  title={post.data.title}
  category={post.data.category}
  date={date}
  description={post.data.description}
  heroImage={post.data.heroImage}
  headings={headings}
>
  <Content />
</ArticleLayout>
